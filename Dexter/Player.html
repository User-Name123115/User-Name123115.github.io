<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dexter</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%; background: #121212; color: #eee; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden;
  }
  #particles-js {
    position: fixed; width: 100%; height: 100%; z-index: 0; top: 0; left: 0; background: #121212; filter: grayscale(90%);
  }
  header {
    position: fixed; width: 100%; z-index: 10; background: #1e1e1e; color: #eee; padding: 1rem 1rem 1rem 4rem;
    font-size: 1.5rem; font-weight: 600; text-align: center; user-select: none; border-bottom: 1px solid #333; box-sizing: border-box;
    text-shadow: 0 1px 3px rgba(0,0,0,0.7);
  }
  #backButton {
    position: fixed; left: 1rem; top: 1rem; z-index: 11;
    background: transparent;
    border: 2px solid #eee;
    color: #eee;
    font-size: 1rem;
    padding: 0.25rem 0.75rem;
    border-radius: 5px;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s, color 0.3s;
    box-shadow: 0 0 8px rgba(255,255,255,0.2);
  }
  #backButton:hover {
    background-color: #eee;
    color: #121212;
    box-shadow: 0 0 12px rgba(255,255,255,0.8);
  }
  main {
    position: fixed; top: 56px; bottom: 0; width: 100%;
    display: flex; justify-content: center; align-items: center;
    z-index: 5; background: transparent;
  }
  video {
    width: 100vw;
    height: calc(100vh - 56px);
    object-fit: contain;
    background: transparent;
    outline: none;
    box-shadow: 0 0 30px rgba(255,255,255,0.1);
    border-radius: 6px;
  }
  .error {
    color: #f66;
    font-size: 1.3rem;
    padding: 1rem 2rem;
    text-align: center;
    background: #2a1a1a;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(255, 100, 100, 0.6);
    max-width: 600px;
  }
  main::-webkit-scrollbar {
    width: 8px;
  }
  main::-webkit-scrollbar-track {
    background: transparent;
  }
  main::-webkit-scrollbar-thumb {
    background-color: #444;
    border-radius: 4px;
  }
</style>
</head>
<body>
<div id="particles-js"></div>
<header id="episodeTitle">Loading...</header>
<button id="backButton" type="button" aria-label="Go back">‚Üê Back</button>
<main id="playerContainer">
  Loading video...
</main>

<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>
  particlesJS('particles-js', {
    particles: {
      number: { value: 80, density: { enable: true, value_area: 800 } },
      color: { value: '#ffffff' },
      shape: { type: 'circle' },
      opacity: { value: 0.15, random: false },
      size: { value: 3, random: true },
      line_linked: { enable: true, distance: 150, color: '#ffffff', opacity: 0.08, width: 1 },
      move: { enable: true, speed: 2, direction: 'none', random: true, straight: false, out_mode: 'out', bounce: false }
    },
    interactivity: {
      detect_on: 'canvas',
      events: {
        onhover: { enable: true, mode: 'grab' },
        onclick: { enable: true, mode: 'push' },
        resize: true
      },
      modes: {
        grab: { distance: 140, line_linked: { opacity: 0.3 } },
        push: { particles_nb: 4 }
      }
    },
    retina_detect: true
  });

  function getQueryParam(param) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
  }

  const videoLink = getQueryParam('video');
  const episodeName = getQueryParam('episode') || 'Video Player';

  const episodeTitle = document.getElementById('episodeTitle');
  const playerContainer = document.getElementById('playerContainer');
  const backButton = document.getElementById('backButton');

  episodeTitle.textContent = decodeURIComponent(episodeName);

  backButton.addEventListener('click', () => {
    window.location.href = 'https://user-name123115.github.io/Dexter';
  });

  if (!videoLink) {
    playerContainer.innerHTML = '<div class="error">No video link provided. Please go back and select a show.</div>';
  } else {
    const video = document.createElement('video');
    video.src = decodeURIComponent(videoLink);
    video.controls = true;
    video.autoplay = true;
    video.playsInline = true;
    video.style.width = '100vw';
    video.style.height = 'calc(100vh - 56px)';
    video.style.objectFit = 'contain';
    video.style.background = 'transparent';

    playerContainer.innerHTML = '';
    playerContainer.appendChild(video);
  }
</script>
</body>
</html>
